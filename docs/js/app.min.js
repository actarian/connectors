!function(){"use strict";Element.prototype.hasClass=function(e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(this.className)},Element.prototype.addClass=function(e){this.hasClass(e)||(this.className=this.className?this.className+" "+e:e)},Element.prototype.removeClass=function(e){this.hasClass(e)&&(this.className=this.className.split(e).join("").replace(/\s\s+/g," "))},Element.prototype.isDescendant=function(e){return function e(t,n){return t===n||!!t.parentNode&&e(t.parentNode,n)}(this,e)},Element.prototype.getBounds=function(){var e={x:0,y:0,width:this.offsetWidth,height:this.offsetHeight,center:{x:0,y:0}};return e.center.x=e.width/2,e.center.y=e.height/2,e},window.getTouch=function(e){var t=new THREE.Vector2;if(t.t=new THREE.Vector2,t.relativeTo=function(e){var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;this.x=(this.x-t.left-n)/e.offsetWidth*2-1,this.y=-(this.y-t.top-r)/e.offsetHeight*2+1},t.pinchSize=function(){return Math.sqrt((this.x-this.t.x)*(this.x-this.t.x)+(this.y-this.t.y)*(this.y-this.t.y))},t.count=1,"touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"touchcancel"==e.type){var n=null,r=null,i=e.originalEvent?e.originalEvent.touches||e.originalEvent.changedTouches:e.touches||e.changedTouches;i&&i.length&&(n=i[0],1<i.length&&(r=i[1])),n&&(t.x=n.pageX,t.y=n.pageY),r&&(t.t.x=r.pageX,t.t.y=r.pageY,t.count=2)}else"click"!=e.type&&"mousedown"!=e.type&&"mouseup"!=e.type&&"mousemove"!=e.type&&"mouseover"!=e.type&&"mouseout"!=e.type&&"mouseenter"!=e.type&&"mouseleave"!=e.type||(t.x=e.pageX,t.y=e.pageY);return t}}(),function(){"use strict";var P={HELPER:!1,JOINTS:!1,MODELS:!0,ANGLE:!1,FINISH:"standard"},j=(Math.PI,.025),A=0;var O=new THREE.Quaternion;O.setFromAxisAngle(new THREE.Vector3(0,1,0),Math.PI);var l=function(){function e(){var e=this;e.size=new THREE.Vector3,e.box=new THREE.Box3,e.group=new THREE.Group,e.outer=new THREE.Group,e.inner=new THREE.Group}return e.prototype={enter:function(e){var t=this;t.outer.position.x=t.size.x,TweenLite.to(t.outer.position,.6,{x:0,ease:Power2.easeOut,overwrite:"all",onComplete:function(){"function"==typeof e&&e()}})},load:function(e,t,n,r){for(var i=this,a=i.box,o=i.size,s=i.group,l=i.outer,p=i.inner,c=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,h=0;h<e.vertices.length;h++)e.vertices[h].x*=j,e.vertices[h].y*=j,e.vertices[h].z*=j,c=Math.min(c,e.vertices[h].x),u=Math.max(u,e.vertices[h].x);var d=(u+c)/2;p.position.x=d,console.log(c,u,d),g=t,E=n,m=r,v=["left","right","top","bottom"],f=[16711680,65280,255,16776960],m=m||P.FINISH,t=g.map(function(e,t){var n=v.indexOf(e.name);return-1!==n?new THREE.MeshStandardMaterial({name:e.name,color:new THREE.Color(f[n]),visible:!1}):(e.name=e.name.replace("chrome","silver"),E.materials[m][e.name].clone())});var g,E,m,v,f;var w=new THREE.Mesh(e,t);a.setFromObject(w),a.getSize(o);var T=i.getJoints(e,t,o);i.quaternionL=w.quaternion.clone();var M=(new THREE.Quaternion).setFromUnitVectors(T.left.normal.clone().multiplyScalar(-1),T.right.normal);if(i.quaternionR=(new THREE.Quaternion).multiplyQuaternions(i.quaternionL,O).multiply(M.inverse()),i.positionL=new THREE.Vector3,i.positionR=T.left.origin.clone().sub(T.right.origin.clone().applyQuaternion(i.quaternionR)),w.geometry.computeVertexNormals(),w.geometry.verticesNeedUpdate=!0,w.geometry.uvsNeedUpdate=!0,P.MODELS){t[1].color=new THREE.Color(0),e=new THREE.BoxGeometry(o.x,o.y,o.z);var R=new THREE.MeshStandardMaterial({color:new THREE.Color(.2*++A,0,0),wireframe:!1,transparent:!1,opacity:1});w=new THREE.Mesh(e,R)}for(var y in T){var H=T[y],x=H.normal.x,b=H.normal.y,L=-H.normal.z,S=new THREE.Euler(0,Math.atan2(L,x),Math.atan2(b,Math.sqrt(x*x+L*L)));if(H.rotation.copy(S),w.add(H),P.JOINTS){var z=new THREE.Mesh(new THREE.BoxGeometry(.1,.1,.1),new THREE.MeshBasicMaterial({color:H.color}));H.add(z)}}p.position.set(o.x/2-d,0,0),p.add(w),l.add(p),s.add(l),i.joints=T,i.model=w},flip:function(e){var t=this;t.inner;t.flipped=!t.flipped;var n={pow:t.flipped?0:1};TweenLite.to(n,.3,{pow:t.flipped?1:0,ease:Power2.easeOut,overwrite:"all",onUpdate:function(){THREE.Quaternion.slerp(t.quaternionL,t.quaternionR,t.model.quaternion,n.pow),t.model.position.lerpVectors(t.positionL,t.positionR,n.pow)},onComplete:function(){"function"==typeof e&&e()}})},getJoints:function(e,t,n){var r,i,a={},o={},s=["left","right","top","bottom"],l=[16711680,65280,255,16776960];t.filter(function(e,t){var n=s.indexOf(e.name);if(-1!==n){var r=new THREE.Group;r.name=s[n],r.color=l[n],r.vertices=[],a[e.name]=r,o[t]=r}});for(var p=0;p<e.faces.length;p++)i=e.faces[p],(r=o[String(i.materialIndex)])&&(r.normal=r.normal||i.normal,r.vertices.push(e.vertices[i.a]),r.vertices.push(e.vertices[i.b]),r.vertices.push(e.vertices[i.c]));for(var c in a)(r=a[c]).position.copy((u=r.vertices,void 0,h=u.reduce(function(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}}),(new THREE.Vector3).add(h).divideScalar(u.length))),r.origin=r.position.clone(),r.vertices=null;var u,h;a.left||(a.left=new THREE.Group,a.left.position.set(-n.x/2,0,0),a.left.origin=r.position.clone(),a.left.normal=new THREE.Vector3(-1,0,0),a.left.c=l[0]);a.right||(a.right=new THREE.Group,a.right.position.set(n.x/2,0,0),a.right.origin=r.position.clone(),a.right.normal=new THREE.Vector3(1,0,0),a.right.c=l[1]);P.ANGLE&&(a.right.normal.y+=.2);return a},setFlip:function(){var e=this,t=e.model;t.quaternion.copy(e.flipped?e.quaternionR:e.quaternionL),t.position.copy(e.flipped?e.positionR:e.positionL),e.group.updateMatrixWorld()}},e}(),e=function(){function e(e,t){var n=this;n.flags={rotate:!1},n.scene=e,n.library=t,n.flipping=0,n.entering=0,n.items=[],n.hittables=[],n.center=new THREE.Vector3,n.size=new THREE.Vector3,n.group=new THREE.Group,n.box=new THREE.Box3,P.HELPER&&(n.boxhelper=new THREE.Box3Helper(n.box,16711935),n.originhelper=new THREE.Mesh(new THREE.BoxGeometry(.1,.1,.1),new THREE.MeshBasicMaterial({color:11141375})),n.centerhelper=new THREE.Mesh(new THREE.BoxGeometry(.1,.1,.1),new THREE.MeshBasicMaterial({color:16711935})),n.group.add(n.originhelper),e.add(n.boxhelper),e.add(n.centerhelper)),e.add(n.group)}return e.prototype={add:function(e,t,n,r){var i=this,n=i.library,a=(i.box,i.size,i.items),o=(i.hittables,i.group);i.unselect();var s=new l;return s.load(e,t,n,r),a.push(s),i.hittables=a.map(function(e){return e.model}),o.add(s.group),s.setFlip(),i.adjust(),s},adjust:function(){this.combine(),this.fit()},busy:function(){return this.entering||this.flipping},combine:function(){var n,e=this.items,r=(this.group,new THREE.Quaternion),i=(new THREE.Vector3,new THREE.Vector3);e.length&&e.filter(function(e,t){e.flipped?(e.joints.right,n=e.joints.left):(e.joints.left,n=e.joints.right);0<t&&(e.group.setRotationFromQuaternion(r),e.group.position.copy(i));n.getWorldQuaternion(r),n.getWorldPosition(i)})},fit:function(){var e=this,t=e.box,n=e.size,r=e.center,i=e.centerhelper,a=e.group;t.setFromObject(a),t.getCenter(r),t.getSize(n),P.HELPER&&i.position.copy(r);return n},flip:function(e){var t=this;t.items,t.hittables;t.selection&&t.flipItem(t.selection.item,e)},flipItem:function(e,t){var n=this;n.flipping++,e.flip(function(){n.flipping--,n.adjust(),"function"==typeof t&&setTimeout(function(){t()},100)})},hitAndFlip:function(e,t){var n=this.items,r=this.hittables,i=e.intersectObjects(r);if(i.length){var a=r.indexOf(i[0].object),o=n[a];this.flipItem(o,t)}},pop:function(){var e=this,t=e.items,n=(e.hittables,e.group);if(t.length){var r=t.pop();return r.group.parent&&n.remove(r.group),e.hittables=t.map(function(e){return e.model}),e.adjust(),r}},remove:function(){var e=this,t=e.items,n=(e.hittables,e.group);{if(e.selection){var r=e.selection,i=r.item;return t.splice(r.index,1),i.group.parent&&n.remove(i.group),e.hittables=t.map(function(e){return e.model}),e.unselect(),e.adjust(),t.length>r.index&&(e.entering++,t[r.index].enter(function(){e.entering--})),i}return e.pop()}},rotate:function(e){this.selection.item.outer.rotation.x=this.selection.rotation.x+e,this.selection.item.group.updateMatrixWorld(),this.adjust()},select:function(e){var t=this.items,n=this.hittables;this.unselect();var r=e.intersectObjects(n),i=null;if(r.length){var a=n.indexOf(r[0].object),o=t[a],s=o.outer.rotation.clone();i={index:a,item:o,rotation:s},this.selection=i}return i},unselect:function(){this.selection&&(this.selection=null)},update:function(){var e=this,t=e.flags;if(!e.busy())if(t.rotate){if(e.items.length){var n=e.items[0];n.outer.rotation.x+=.01,e.adjust()}}else e.fit()}},e}();window.Combiner=e}(),function(){"use strict";var e=function(){function e(e,t,n,r,i){var a=new THREE.RenderPass(e,t),o=new THREE.OutlinePass(new THREE.Vector2(r,i),e,t);o.visibleEdgeColor.set(65280),o.hiddenEdgeColor.set(0),o.edgeStrength=5,o.edgeGlow=0,o.edgeThickness=1,o.pulsePeriod=2,o.rotate=!1,o.usePatternTexture=!1;var s=new THREE.ShaderPass(THREE.FXAAShader);s.uniforms.resolution.value.set(1/r,1/i),s.renderToScreen=!0;var l=new THREE.EffectComposer(n);l.addPass(a),l.addPass(o),l.addPass(s),this.renderPass=a,this.outlinePass=o,this.fxaaPass=s,this.composer=l}return e.prototype={update:function(){this.composer.render()},resize:function(e,t){this.composer.setSize(e,t),this.fxaaPass.uniforms.resolution.value.set(1/e,1/t)},select:function(e){this.outlinePass.selectedObjects=[e]},unselect:function(){this.outlinePass.selectedObjects=[]}},e}();window.Effects=e}(),function(){"use strict";var i=!0,w=Math.PI/180;var e=function(){function e(e,t,n){var r=this;r.scene=e,r.camera=t,r.dummy=t.clone(),r.controls=n,r.projector=new THREE.Projector,r.position=new THREE.Vector3,r.target=new THREE.Vector3,r.center=new THREE.Vector3,r.size=new THREE.Vector3,r.box=new THREE.Box3,r.boxhelper=new THREE.Box3Helper(r.box,16711680),r.rotate=!1,r.target=new THREE.Vector3(0,0,0),r.distance=22,r.angle=0,r.endTarget=new THREE.Vector3(0,0,0),r.position=new THREE.Vector3(0,0,0),r.distanceMin=10,r.distanceMax=34,r.rotationAngle=1,r.dragAngle=0,r.zoom=1,r.pow=0,i&&r.scene.add(r.boxhelper)}return e.prototype={fit:function(e,t,n){t||(t=1.3);n||(n=new THREE.Vector3(0,1,0));var r=this,i=(r.projector,r.box),a=r.size,o=r.center,s=r.camera,l=r.controls,p=r.dummy,c=e.selection?e.selection.item.group:e.group;i.setFromObject(c),i.getCenter(o),p.position.copy(s.position),p.quaternion.copy(s.quaternion),p.up=n,p.lookAt(o),p.updateProjectionMatrix();r.toScreen(i.min),r.toScreen(i.max),r.toScreen(o);i.applyMatrix4(p.matrixWorldInverse),i.getSize(a);var u=a.x/a.y,h=s.aspect>u?a.y:a.x;s.aspect<u&&(h/=s.aspect);var d=(h*=t)/2/Math.sin(s.fov/2*w);p.position.normalize().multiplyScalar(d),r.distance=p.position.distanceTo(o),p.updateProjectionMatrix();var g=s.position.clone(),E=p.position,m=s.quaternion.clone(),v=p.quaternion,f={pow:0};TweenLite.to(f,.6,{pow:1,ease:Power2.easeOut,overwrite:"all",onUpdate:function(){s.position.lerpVectors(g,E,f.pow),THREE.Quaternion.slerp(m,v,s.quaternion,f.pow),s.updateProjectionMatrix()},onComplete:function(){l&&(l.target.copy(o),l.update())}})},toScreen:function(e){var t=this.camera,n=window.innerWidth/2,r=window.innerHeight/2,i=e.clone();return i.project(t),i.x=(i.x+1)*n,i.y=(1-i.y)*r,i},toWorld:function(e){var t=this.projector,n=this.camera,r=window.innerWidth/2,i=window.innerHeight/2,a=e.clone();return a.x=a.x/r-1,a.y=-a.y/i+1,t.unprojectVector(a,n),a},update:function(){var e=this,t=e.target,n=e.endTarget,r=e.position,i=e.distance,a=e.zoom,o=e.dragAngle,s=e.rotationAngle,l=(e.pow,e.camera);e.rotate&&(s=e.rotationAngle+=2e-4);t.x+=(n.x-t.x)/40,t.y+=(n.y-t.y)/40,t.z+=(n.z-t.z)/40,r.x=t.x+i*a*Math.cos(o+s),r.y=t.y+i*a,r.z=t.z+i*a*Math.sin(o+s),l.position.x+=(r.x-l.position.x)/13,l.position.y+=(r.y-l.position.y)/13,l.position.z+=(r.z-l.position.z)/13,l.lookAt(t)}},e}();window.Fitter=e}(),function(){"use strict";var e=function(){function e(){this.loader=new THREE.JSONLoader}e.prototype={load:function(n){var r=this;(function(e){var t={method:"GET",responseType:"text"};if(!e||!e.url||!e.onload)return;for(var n in e)t[n]=e[n];var r=new XMLHttpRequest;r.open(t.method,t.url,!0),r.responseType=t.responseType,r.onload=function(){200===this.status&&t.onload(this.response)},t.onerror&&(r.onerror=t.onerror);t.onprogress&&(r.onerror=t.onprogress);r.send()})({url:t%2==0?"img/Curved Body 1.js":"img/Angled Emitter 1.js",onload:function(e){e=(e=e.replace(new RegExp("transparency","g"),"opacity")).replace(new RegExp(".#QNAN0","g"),".0");var t=r.loader.parse(JSON.parse(e));n(t.geometry,t.materials)}}),t++}};var t=0;return e}();window.Forge=e}(),function(){"use strict";var e=function(){var n="img/textures/",r=1,t=!1;function e(e){r=e.capabilities.getMaxAnisotropy(),this.replaceShader();var t=new THREE.LoadingManager;this.renderer=e,this.manager=t,this.textures=this.getTextures(),this.materials=this.getMaterials()}return e.prototype={getMaterials:function(){this.manager,this.loader;var e=this.textures;return t?{floor:new THREE.MeshPhongMaterial({bumpMap:e.floor,bumpScale:.05,color:1052688,specular:1052688,reflectivity:.15,shininess:12}),wrap:new THREE.MeshPhongMaterial({name:"wrap",color:1052688,specular:4473924,shininess:7,reflectivity:.75,specularMap:e.leatherLight,bumpMap:e.leatherBump,bumpScale:.15,combine:THREE.MixOperation}),bronze:new THREE.MeshPhongMaterial({name:"bronze",color:12615517,specular:5592405,specularMap:e.silver,shininess:10,reflectivity:.2,envMap:e.env,combine:THREE.MixOperation,bumpMap:e.silver,bumpScale:.001}),gold:new THREE.MeshPhongMaterial({name:"gold",color:13151584,specular:5592405,specularMap:e.silver,shininess:10,reflectivity:.2,envMap:e.env,combine:THREE.MixOperation,bumpMap:e.silver,bumpScale:.001}),green:new THREE.MeshPhongMaterial({name:"green",color:43520,specular:3355443,specularMap:e.silver,shininess:30,reflectivity:.1,envMap:e.env,combine:THREE.MixOperation,bumpMap:e.silver,bumpScale:.003}),red:new THREE.MeshPhongMaterial({name:"red",color:14483456,specular:3355443,specularMap:e.silver,shininess:30,reflectivity:.1,envMap:e.env,combine:THREE.MixOperation,bumpMap:e.silver,bumpScale:.003}),standard:{silver:new THREE.MeshPhongMaterial({name:"chrome",color:8947848,specular:5592405,specularMap:e.silver,shininess:30,reflectivity:.15,envMap:e.env,combine:THREE.MixOperation,bumpMap:e.silver,bumpScale:.003}),black:new THREE.MeshPhongMaterial({name:"black",color:855309,reflectivity:.3,envMap:e.env,combine:THREE.MultiplyOperation})},weathered:{silver:new THREE.MeshPhongMaterial({name:"chrome",color:4473924,specular:5592405,specularMap:e.weathered,shininess:90,reflectivity:.15,envMap:e.env,combine:THREE.MixOperation,bumpMap:e.silver,bumpScale:.003,map:e.weathered,roughness:.2,metalness:.5,metalnessMap:e.weathered}),black:new THREE.MeshPhongMaterial({name:"chrome",color:3355443,specular:4473924,specularMap:e.weathered,shininess:90,reflectivity:.05,envMap:e.env,combine:THREE.MixOperation,bumpMap:e.silver,bumpScale:.003,map:e.weathered,roughness:1.4,roughnessMap:e.weathered,metalness:.5,metalnessMap:e.silver})},black:{silver:new THREE.MeshPhongMaterial({name:"chrome",color:460551,specular:657930,reflectivity:.05,envMap:e.env,combine:THREE.MultiplyOperation}),black:new THREE.MeshPhongMaterial({name:"black",color:394758,specular:657930,reflectivity:.05,envMap:e.env,combine:THREE.MultiplyOperation})},light:{off:new THREE.MeshPhongMaterial({name:"light",opacity:.98,transparent:!0,color:4473924,specular:8947848,shininess:20,reflectivity:.3}),on6:new THREE.MeshPhongMaterial({name:"light",opacity:.98,transparent:!0,color:4473924,emissive:4473924,specular:8947848,shininess:20,reflectivity:.3}),on12:new THREE.MeshPhongMaterial({name:"light",color:16777215,emissive:8947848,specular:16777215,shininess:100,reflectivity:.3})},glare:{off:new THREE.MeshLambertMaterial({name:"glare",opacity:0,transparent:!0,color:0}),on6:new THREE.MeshLambertMaterial({name:"glare",opacity:.6,transparent:!0,color:15529211,map:e.glare,blending:THREE.AdditiveBlending,specular:0,shininess:0,combine:THREE.MixOperation,reflectivity:0}),on12:new THREE.MeshLambertMaterial({name:"glare",opacity:.85,transparent:!0,color:15529211,map:e.glare,blending:THREE.AdditiveBlending,specular:0,shininess:0,combine:THREE.MixOperation,reflectivity:0})},emitterGlare:{off:new THREE.MeshLambertMaterial({name:"glare",opacity:0,transparent:!0,color:0}),on6:new THREE.MeshLambertMaterial({name:"glare",opacity:.6,transparent:!0,color:15529211,map:e.emitterGlare,blending:THREE.AdditiveBlending,specular:0,shininess:0,combine:THREE.MixOperation,reflectivity:0}),on12:new THREE.MeshLambertMaterial({name:"glare",opacity:.85,transparent:!0,color:15529211,map:e.emitterGlare,blending:THREE.AdditiveBlending,specular:0,shininess:100,combine:THREE.MixOperation,reflectivity:0})}}:{floor:new THREE.MeshStandardMaterial({name:"floor",color:1052688,roughness:.5,metalness:.1,bumpMap:e.floor,bumpScale:.05,envMap:e.env}),wrap:new THREE.MeshPhongMaterial({name:"wrap",color:1052688,specular:4473924,shininess:7,reflectivity:.75,specularMap:e.leatherLight,bumpMap:e.leatherBump,bumpScale:.15}),bronze:new THREE.MeshStandardMaterial({name:"bronze",color:12615517,roughness:.5,roughnessMap:e.silver,metalness:.9,metalnessMap:e.weathered,envMap:e.env,envMapIntensity:.15}),gold:new THREE.MeshStandardMaterial({name:"gold",color:13151584,roughness:.5,roughnessMap:e.silver,metalness:.9,metalnessMap:e.weathered,envMap:e.env,envMapIntensity:.15}),green:new THREE.MeshPhongMaterial({name:"green",color:43520,specular:3355443,specularMap:e.silver,shininess:30,reflectivity:.1,envMap:e.env,bumpMap:e.silver,bumpScale:.003}),red:new THREE.MeshPhongMaterial({name:"red",color:14483456,specular:3355443,specularMap:e.silver,shininess:30,reflectivity:.1,envMap:e.env,bumpMap:e.silver,bumpScale:.003}),standard:{silver:new THREE.MeshStandardMaterial({name:"chrome",color:8947848,roughness:.5,roughnessMap:e.silver,metalness:.9,metalnessMap:e.weathered,envMap:e.env,envMapIntensity:1}),black:new THREE.MeshStandardMaterial({name:"black",color:855309,roughness:.4,metalness:.4,envMap:e.env,envMapIntensity:1})},weathered:{silver:new THREE.MeshStandardMaterial({name:"chrome",color:4473924,map:e.weathered,roughness:.7,roughnessMap:e.silver,metalness:.9,envMap:e.env}),black:new THREE.MeshStandardMaterial({name:"chrome",color:3947580,map:e.weathered,roughness:.7,roughnessMap:e.silver,metalness:.9,envMap:e.env})},black:{silver:new THREE.MeshStandardMaterial({name:"chrome",color:526344,roughness:.5,metalness:.9,envMap:e.env}),black:new THREE.MeshStandardMaterial({name:"black",color:855309,roughness:.4,metalness:.4,envMap:e.env,envMapIntensity:1})},light:{off:new THREE.MeshPhongMaterial({name:"light",opacity:.98,transparent:!0,color:4473924,specular:8947848,shininess:20,reflectivity:.3}),on6:new THREE.MeshPhongMaterial({name:"light",opacity:.98,transparent:!0,color:4473924,emissive:4473924,specular:8947848,shininess:20,reflectivity:.3}),on12:new THREE.MeshPhongMaterial({name:"light",color:16777215,emissive:8947848,specular:16777215,shininess:100,reflectivity:.3})},glare:{off:new THREE.MeshLambertMaterial({name:"glare",opacity:0,transparent:!0,color:0}),on6:new THREE.MeshLambertMaterial({name:"glare",opacity:.6,transparent:!0,color:15529211,map:e.glare,blending:THREE.AdditiveBlending,specular:0,shininess:0,combine:THREE.MixOperation,reflectivity:0}),on12:new THREE.MeshLambertMaterial({name:"glare",opacity:.85,transparent:!0,color:15529211,map:e.glare,blending:THREE.AdditiveBlending,specular:0,shininess:0,combine:THREE.MixOperation,reflectivity:0})},emitterGlare:{off:new THREE.MeshLambertMaterial({name:"glare",opacity:0,transparent:!0,color:0}),on6:new THREE.MeshLambertMaterial({name:"glare",opacity:.6,transparent:!0,color:15529211,map:e.emitterGlare,blending:THREE.AdditiveBlending,specular:0,shininess:0,combine:THREE.MixOperation,reflectivity:0}),on12:new THREE.MeshLambertMaterial({name:"glare",opacity:.85,transparent:!0,color:15529211,map:e.emitterGlare,blending:THREE.AdditiveBlending,specular:0,shininess:100,combine:THREE.MixOperation,reflectivity:0})}}},getTextures:function(){var e=this,t=(this.manager,{});return t.env=e.getTextureCube("env/"),t.env.anisotropy=r,t.env.format=THREE.RGBFormat,t.floor=e.getTexture("floor.jpg"),t.floor.anisotropy=r,t.floor.wrapS=THREE.RepeatWrapping,t.floor.wrapT=THREE.RepeatWrapping,t.floor.repeat.set(40,40),t.silver=e.getTexture("brushed-light.jpg"),t.silver.anisotropy=r,t.silver.wrapT=THREE.RepeatWrapping,t.weathered=e.getTexture("brushed-dark.jpg"),t.weathered.anisotropy=r,t.weathered.wrapT=THREE.RepeatWrapping,t.bump=e.getTexture("brushed-dark.jpg"),t.bump.anisotropy=r,t.bump.wrapS=THREE.RepeatWrapping,t.bump.wrapT=THREE.RepeatWrapping,t.bump.repeat.set(5,5),t.glare=e.getTexture("glare.jpg"),t.glare.anisotropy=r,t.emitterGlare=e.getTexture("emitter-glare.jpg"),t.emitterGlare.anisotropy=r,t.leatherBump=e.getTexture("leather-bump.jpg"),t.leatherBump.anisotropy=r,t.leatherBump.wrapS=THREE.RepeatWrapping,t.leatherBump.wrapT=THREE.RepeatWrapping,t.leatherLight=e.getTexture("leather-light.jpg"),t.leatherLight.anisotropy=r,t.leatherLight.wrapS=THREE.RepeatWrapping,t.leatherLight.wrapT=THREE.RepeatWrapping,t.reptileBump=e.getTexture("reptile-bump.jpg"),t.reptileBump.anisotropy=r,t.reptileBump.wrapS=THREE.RepeatWrapping,t.reptileBump.wrapT=THREE.RepeatWrapping,t.reptileLight=e.getTexture("reptile-light.jpg"),t.reptileLight.anisotropy=r,t.reptileLight.wrapS=THREE.RepeatWrapping,t.reptileLight.wrapT=THREE.RepeatWrapping,t.stingrayBump=e.getTexture("stingray-bump.jpg"),t.stingrayBump.anisotropy=r,t.stingrayBump.wrapS=THREE.RepeatWrapping,t.stingrayBump.wrapT=THREE.RepeatWrapping,t.stingrayLight=e.getTexture("stingray-light.jpg"),t.stingrayLight.anisotropy=r,t.stingrayLight.wrapS=THREE.RepeatWrapping,t.stingrayLight.wrapT=THREE.RepeatWrapping,t},getTexture:function(e){var t=this.manager;this.textures;return new THREE.TextureLoader(t).load(n+e,function(e){},function(e,t){},function(e){})},getTextureCube:function(e){var t=this.manager;this.textures;return new THREE.CubeTextureLoader(t).setPath(n+e).load(["px.jpg","nx.jpg","py.jpg","ny.jpg","pz.jpg","nz.jpg"],function(e){},function(e,t){},function(e){})},getTextureCubeHdr:function(e,r){var i=this,a=this.renderer,o=(this.manager,this.textures),t=[n+e+"px.hdr",n+e+"nx.hdr",n+e+"py.hdr",n+e+"ny.hdr",n+e+"pz.hdr",n+e+"nz.hdr"];return(new THREE.HDRCubeTextureLoader).load(THREE.UnsignedByteType,t,function(e){a.gammaInput=!0,a.gammaOutput=!0,a.toneMapping=THREE.LinearToneMapping,a.toneMappingExposure=1.3;var t=new THREE.PMREMGenerator(e);t.update(a);var n=new THREE.PMREMCubeUVPacker(t.cubeLods);n.update(a),o[r]=n.CubeUVRenderTarget,e.dispose(),i.materials.weathered.silver.envMap=n.CubeUVRenderTarget,i.materials.weathered.silver.needsUpdate=!0,i.materials.weathered.black.envMap=n.CubeUVRenderTarget,i.materials.weathered.black.needsUpdate=!0})},replaceShader:function(){var e=THREE.ShaderChunk.meshphong_frag;THREE.ShaderChunk.meshphong_frag=e.replace("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * specular + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;")}},e}();window.Library=e}(),function(){"use strict";var i=!1,d=Math.PI/180,g=11;var e=function(){function e(e,t,n){var r=this;r.scene=e,r.camera=t,r.dummy=t.clone(),r.controls=n,r.projector=new THREE.Projector,r.center=new THREE.Vector3,r.size=new THREE.Vector3,r.box=new THREE.Box3,r.boxhelper=new THREE.Box3Helper(r.box,16711680),r.rotate=!0,r.target=new THREE.Vector3(0,0,0),r.distance=2*g,r.rotationAngle=1,r.dragAngle=0,r.zoom=1,r.pow=0,r.values={target:new THREE.Vector3(0,0,0),distance:2*g,rotationAngle:0,dragAngle:0,zoom:0,pow:0},r.distanceMin=g,r.distanceMax=3*g,r.set(r.camera,r.target),i&&r.scene.add(r.boxhelper)}return e.prototype={fit:function(e,t,n){t||(t=1.3);n||(n=new THREE.Vector3(0,1,0));var r=this,i=(r.projector,r.box),a=r.size,o=r.center,s=r.camera,l=(r.controls,r.dummy),p=e.selection?e.selection.item.group:e.group;if(i.setFromObject(p),i.getCenter(o),i.getSize(a),0<e.items.length){r.set(l,o),l.fov=s.fov,l.aspect=s.aspect,a.applyMatrix4(l.matrixWorldInverse);var c=a.x/a.y,u=s.aspect>c?a.y:a.x;s.aspect<c&&(u/=s.aspect);var h=(u*=t)/2/Math.sin(s.fov/2*d);r.distance=h}else r.distance=g;r.distanceMin=.5*r.distance,r.distanceMax=1.5*r.distance,r.target.copy(o)},set:function(e,t){var n=this.values;e.position.x=t.x+n.distance*n.zoom*Math.cos(n.dragAngle+n.rotationAngle),e.position.y=t.y+n.distance*n.zoom,e.position.z=t.z+n.distance*n.zoom*Math.sin(n.dragAngle+n.rotationAngle),e.lookAt(t)},toScreen:function(e){var t=this.camera,n=window.innerWidth/2,r=window.innerHeight/2,i=e.clone();return i.project(t),i.x=(i.x+1)*n,i.y=(1-i.y)*r,i},toWorld:function(e){var t=this.projector,n=this.camera,r=window.innerWidth/2,i=window.innerHeight/2,a=e.clone();return a.x=a.x/r-1,a.y=-a.y/i+1,t.unprojectVector(a,n),a},tween:function(){var e=this,t=e.target,n=e.values;e.rotate&&(e.rotationAngle+=2e-4);var r=1/15;n.target.x+=(t.x-n.target.x)*r,n.target.y+=(t.y-n.target.y)*r,n.target.z+=(t.z-n.target.z)*r,n.distance+=(e.distance-n.distance)*r,n.rotationAngle+=(e.rotationAngle-n.rotationAngle)*r,n.dragAngle+=(e.dragAngle-n.dragAngle)*r,n.zoom+=(e.zoom-n.zoom)*r,n.pow+=(e.pow-n.pow)*r},update:function(){this.tween(),this.set(this.camera,this.values.target)}},e}();window.Orbiter=e}(),function(){"use strict";if(Detector.webgl){var e=document.querySelector(".btn-add"),t=document.querySelector(".btn-remove"),n=document.querySelector(".btn-flip"),i=document.querySelector(".editor"),r=i.offsetWidth,a=i.offsetHeight,o=new Forge,s=new THREE.WebGLRenderer({alpha:!0,antialias:!0});s.setSize(r,a),i.appendChild(s.domElement);var l,p,c,u=new THREE.PerspectiveCamera(45,r/a,1,5e4),h=new THREE.Scene,d=new Library(s),g=function(e){var t=new THREE.Group;t.name="pivot",t.rotation.y=Math.PI/180*90;var n=new THREE.AmbientLight(4473924);e.add(n);var r=new THREE.DirectionalLight(15654365,1,2e3);r.name="light1",r.position.set(-30,20,10),t.add(r);var i=new THREE.DirectionalLight(14540270,1,2e3);return i.name="light2",i.position.set(30,20,-10),t.add(i),e.add(t),t}(h),E=(l=h,(p=new THREE.Mesh(new THREE.PlaneBufferGeometry(500,500),d.materials.floor)).name="floor",p.rotation.x=-Math.PI/2,p.position.y=-3.5,p.visible=!0,l.add(p),p),m=new Combiner(h,d),v=new Orbiter(h,u),f=new Effects(h,u,s,r,a),w=new THREE.Raycaster,T=0;i.addEventListener("mousedown",function(e){R(e),window.addEventListener("mousemove",y),window.addEventListener("mouseup",H)}),i.addEventListener("touchstart",function(e){R(e),window.addEventListener("touchmove",y),window.addEventListener("touchend",H),e.stopPropagation(),e.preventDefault()}),i.addEventListener("mousewheel",function(e){e=window.event||e;var t=i.getBounds();if(Math.abs(e.pageX-t.center.x)<t.width/3){var n=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));v.distance+=n,v.distance=Math.min(v.distanceMax,Math.max(v.distanceMin,v.distance)),v.update(),e.preventDefault()}}),window.addEventListener("resize",function(){r=i.offsetWidth,a=i.offsetHeight,u.aspect=r/a,u.updateProjectionMatrix(),v.fit(m),s.setSize(r,a),f&&f.resize(r,a)},!1),e.addEventListener("click",M),t.addEventListener("click",function(){m.busy()||(m.remove(),v.fit(m))}),n.addEventListener("click",function(){m.flip(function(){v.fit(m)})}),function e(){!function(){m.update();var e=m.center.y-m.size.y/2-3;E.position.y+=(e-E.position.y)/8,g.position.x+=(m.center.x-g.position.x)/8,g.position.y+=(m.center.y-g.position.y)/8,g.position.z+=(m.center.z-g.position.z)/8,v.update(),f.update()}(),requestAnimationFrame(e)}(),setTimeout(M,1e3)}else Detector.addGetWebGLMessage();function M(){m.busy()||o.load(function(e,t){f&&f.unselect();var n=m.add(e,t);v.fit(m),m.entering++,n.enter(function(){m.entering--})})}function R(e){(c=getTouch(e)).relativeTo(i),c.mx=c.x,c.startDragAngle=v.dragAngle,c.startDistance=v.distance,w.setFromCamera(c,u);var t=m.select(w);t?(c.index=t.index,c.item=t.item,c.rotation=t.rotation,f&&f.select(c.item.model)):f&&f.unselect(),v.fit(m)}function y(e){T++;var t=1;if("touchmove"===e.type&&(e.stopPropagation(),e.preventDefault(),t*=4),c){var n=getTouch(e);n.relativeTo(i);var r=n.sub(c);2==n.count&&2==c.count?v.distance=c.startDistance+(c.pinchSize()-n.pinchSize())*t*10:m.selection&&m.selection.item===c.item?m.rotate(r.y*t*10):(v.dragAngle=c.startDragAngle+r.x*t*10,v.distance=c.startDistance+r.y*t*-10),v.distance=Math.min(v.distanceMax,Math.max(v.distanceMin,v.distance))}}function H(e){c&&T<5&&(c.item||m.selectedItem),c=null,T=0,window.removeEventListener("touchmove mousemove",y),window.removeEventListener("touchend mouseup",H)}}();
//# sourceMappingURL=app.min.js.map
